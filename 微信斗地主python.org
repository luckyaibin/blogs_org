
* 流程分析
 1. wxbot登陆一个微信之后,所有的消息都要经过handle_msg_all
 2. 在群聊里面的时候,自己发送到群里的消息的类型是自己的消息,而不是群消息
 3. 每个群暂时只支持一个斗地主
 4. 如果要参与群里的斗地主,参与人必须要加群主为好友:为了私聊斗地主的牌

 #+BEGIN_SRC


           +---------------------------------------------------------+
           |                                                         |
           |                +-------------------------------------+  |
           |                |         某个群里的斗地主房间           |  |
           |                |                                     |  |
           |                |      +--------------------------+   |  |
           |                |      |  玩家1                   |   |  |
           |                |      |                          |   |  |
           |                |      +--------------------------+   |  |
           |                |                                     |  |
           |某个微信群聊      |      +--------------------------+   |  |
           |                |      |  玩家2                   |   |  |
           |                |      |                          |   |  |
           |                |      +--------------------------+   |  |
           |                |      |                          |   |  |
           |                |      |  玩家3                   |   |  |
           |                |      |                          |   |  |
           |                |      +--------------------------+   |  |
           |                |                                     |  |
           |                +-------------------------------------+  |
           +---------------------------------------------------------+


                                                                       "开局" 等待其他人加入
                                                                +------------------+
                                                                |                  |
                                                                |                  |
                                                                |                  |
                   +-----------------+                  +-------+---------+        |
         创建房间   |                 |    "开局"        |                 |         |
       ----------> |   房间准备好     |----------------> |  等待其他人加入   | <-------+
                   |                 |                  |                  |
                   +-----------------+                  +-------+---------+
                           ^            +----------------+      |
                           |分出了胜负   | 结束状态,销毁房间|      |人数满了3个人
                           |            +----------------+      V
                   +-------+----------+                 +------------------+
                   |                  |                 |                  |
              +--->|出牌状态           |<----------------+ 叫地主状态        |------+
              |    |                  |                 |                  |      |
              |    +-------+----------+                 +----------^-------+      |
              |            |                                       |              |
              +------------+                                       +--------------+










 #+END_SRC